create database college;
show databases;
use college;
create table student(usn varchar(20) primary key,
sname varchar(30) not null,
address varchar(50) not null,
phone varchar(10) not null,
gender char(1) not null);
desc student;

create table semsec(ssid varchar(10) primary key,
sem int not null,
sec char(1) not null);
desc semsec;
alter table semesc
rename  to semsec;

create table class(usn varchar(20),
ssid varchar(10),
constraint CL_PR primary key(usn,ssid),
foreign key(usn) references student(usn) on delete cascade on update cascade,
foreign key(ssid) references semsec(ssid) on delete cascade on update cascade);
desc class;

create table ssubject(subcode varchar(10) primary key,
title varchar(20) not null,
sem int not null,
credits int not null);
desc ssubject;

create table iamarks(usn varchar(20),
subcode varchar(10),
ssid varchar(10),
test1 int,
test2 int,
test3 int,
finala int,
constraint MARK_PR primary key(usn,subcode,ssid),
foreign key(usn) references student(usn) on delete cascade on update cascade,
foreign key(subcode) references ssubject(subcode) on delete cascade on update cascade,
foreign key(ssid) references semsec(ssid) on delete cascade on update cascade);
desc iamarks;

INSERT INTO STUDENT VALUES ('1RN13CS020','AKSHAY','BELAGAVI', 8877881122,'M'); 
INSERT INTO STUDENT VALUES ('1RN13CS062','SANDHYA','BENGALURU', 7722829912,'F'); 
INSERT INTO STUDENT VALUES ('1RN13CS091','TEESHA','BENGALURU', 7712312312,'F'); 
INSERT INTO STUDENT VALUES ('1RN13CS066','SUPRIYA','MANGALURU', 8877881122,'F'); 
INSERT INTO STUDENT VALUES ('1RN14CS010','ABHAY','BENGALURU', 9900211201,'M'); 
INSERT INTO STUDENT VALUES ('1RN14CS032','BHASKAR','BENGALURU', 9923211099,'M'); 
INSERT INTO STUDENT VALUES ('1RN14CS025','ASMI','BENGALURU', '7894737377','F'); 
INSERT INTO STUDENT VALUES ('1RN15CS011','AJAY','TUMKUR', 9845091341,'M');
INSERT INTO STUDENT VALUES ('1RN15CS029','CHITRA','DAVANGERE', 7696772121,'F'); 
INSERT INTO STUDENT VALUES ('1RN15CS045','JEEVA','BELLARY', 9944850121,'M'); 
INSERT INTO STUDENT VALUES ('1RN15CS091','SANTOSH','MANGALURU', 8812332201,'M'); 
INSERT INTO STUDENT VALUES ('1RN16CS045','ISMAIL','KALBURGI', 9900232201,'M'); 
INSERT INTO STUDENT VALUES ('1RN16CS088','SAMEERA','SHIMOGA', 9905542212,'F'); 
INSERT INTO STUDENT VALUES ('1RN16CS122','VINAYAKA','CHIKAMAGALUR', 8800880011,'M'); 
select *
from student;

INSERT INTO SEMSEC VALUES ('CSE8A', 8,'A'); 
INSERT INTO SEMSEC VALUES ('CSE8B', 8,'B'); 
INSERT INTO SEMSEC VALUES ('CSE8C', 8,'C'); 
INSERT INTO SEMSEC VALUES ('CSE7A', 7,'A'); 
INSERT INTO SEMSEC VALUES ('CSE7B', 7,'B'); 
INSERT INTO SEMSEC VALUES ('CSE7C', 7,'C'); 
INSERT INTO SEMSEC VALUES ('CSE6A', 6,'A'); 
INSERT INTO SEMSEC VALUES ('CSE6B', 6,'B'); 
INSERT INTO SEMSEC VALUES ('CSE6C', 6,'C'); 
INSERT INTO SEMSEC VALUES ('CSE5A', 5,'A'); 
INSERT INTO SEMSEC VALUES ('CSE5B', 5,'B'); 
INSERT INTO SEMSEC VALUES ('CSE5C', 5,'C'); 
INSERT INTO SEMSEC VALUES ('CSE4A', 4,'A'); 
INSERT INTO SEMSEC VALUES ('CSE4B', 4,'B'); 
INSERT INTO SEMSEC VALUES ('CSE4C', 4,'C'); 
INSERT INTO SEMSEC VALUES ('CSE3A', 3,'A'); 
INSERT INTO SEMSEC VALUES ('CSE3B', 3,'B'); 
INSERT INTO SEMSEC VALUES ('CSE3C', 3,'C'); 
INSERT INTO SEMSEC VALUES ('CSE2A', 2,'A'); 
INSERT INTO SEMSEC VALUES ('CSE2B', 2,'B'); 
INSERT INTO SEMSEC VALUES ('CSE2C', 2,'C'); 
INSERT INTO SEMSEC VALUES ('CSE1A', 1,'A');
INSERT INTO SEMSEC VALUES ('CSE1B', 1,'B'); 
INSERT INTO SEMSEC VALUES ('CSE1C', 1,'C'); 
select *
from semsec;

INSERT INTO CLASS VALUES ('1RN13CS020','CSE8A'); 
INSERT INTO CLASS VALUES ('1RN13CS062','CSE8A'); 
INSERT INTO CLASS VALUES ('1RN13CS066','CSE8B'); 
INSERT INTO CLASS VALUES ('1RN13CS091','CSE8C'); 
INSERT INTO CLASS VALUES ('1RN14CS010','CSE7A'); 
INSERT INTO CLASS VALUES ('1RN14CS025','CSE7A'); 
INSERT INTO CLASS VALUES ('1RN14CS032','CSE7A'); 
INSERT INTO CLASS VALUES ('1RN15CS011','CSE4A'); 
INSERT INTO CLASS VALUES ('1RN15CS029','CSE4A'); 
INSERT INTO CLASS VALUES ('1RN15CS045','CSE4B'); 
INSERT INTO CLASS VALUES ('1RN15CS091','CSE4C'); 
INSERT INTO CLASS VALUES ('1RN16CS045','CSE3A'); 
INSERT INTO CLASS VALUES ('1RN16CS088','CSE3B'); 
INSERT INTO CLASS VALUES ('1RN16CS122','CSE3C'); 
select *
from class;

INSERT INTO SSUBJECT VALUES ('10CS81','ACA', 8, 4); 
INSERT INTO SSUBJECT VALUES ('10CS82','SSM', 8, 4); 
INSERT INTO SSUBJECT VALUES ('10CS83','NM', 8, 4); 
INSERT INTO SSUBJECT VALUES ('10CS84','CC', 8, 4); 
INSERT INTO SSUBJECT VALUES ('10CS85','PW', 8, 4); 
INSERT INTO SSUBJECT VALUES ('10CS71','OOAD', 7, 4); 
INSERT INTO SSUBJECT VALUES ('10CS72','ECS', 7, 4); 
INSERT INTO SSUBJECT VALUES ('10CS73','PTW', 7, 4); 
INSERT INTO SSUBJECT VALUES ('10CS74','DWDM', 7, 4); 
INSERT INTO SSUBJECT VALUES ('10CS75','JAVA', 7, 4); 
INSERT INTO SSUBJECT VALUES ('10CS76','SAN', 7, 4); 
INSERT INTO SSUBJECT VALUES ('15CS51', 'ME', 5, 4); 
INSERT INTO SSUBJECT VALUES ('15CS52','CN', 5, 4); 
INSERT INTO SSUBJECT VALUES ('15CS53','DBMS', 5, 4); 
INSERT INTO SSUBJECT VALUES ('15CS54','ATC', 5, 4); 
INSERT INTO SSUBJECT VALUES ('15CS55','JAVA', 5, 3); 
INSERT INTO SSUBJECT VALUES ('15CS56','AI', 5, 3);
INSERT INTO SSUBJECT VALUES ('15CS41','M4', 4, 4); 
INSERT INTO SSUBJECT VALUES ('15CS42','SE', 4, 4); 
INSERT INTO SSUBJECT VALUES ('15CS43','DAA', 4, 4); 
INSERT INTO SSUBJECT VALUES ('15CS44','MPMC', 4, 4); 
INSERT INTO SSUBJECT VALUES ('15CS45','OOC', 4, 3); 
INSERT INTO SSUBJECT VALUES ('15CS46','DC', 4, 3); 
INSERT INTO SSUBJECT VALUES ('15CS31','M3', 3, 4); 
INSERT INTO SSUBJECT VALUES ('15CS32','ADE', 3, 4); 
INSERT INTO SSUBJECT VALUES ('15CS33','DSA', 3, 4); 
INSERT INTO SSUBJECT VALUES ('15CS34','CO', 3, 4); 
INSERT INTO SSUBJECT VALUES ('15CS35','USP', 3, 3); 
INSERT INTO SSUBJECT VALUES ('15CS36','DMS', 3, 3); 
select *
from ssubject;

INSERT INTO IAMARKS  VALUES ('1RN13CS091','10CS81','CSE8C', 15, 16, 18, 49); 
INSERT INTO IAMARKS  VALUES ('1RN13CS091','10CS82','CSE8C', 12, 19, 14, 45); 
INSERT INTO IAMARKS  VALUES ('1RN13CS091','10CS83','CSE8C', 19, 15, 20, 54); 
INSERT INTO IAMARKS  VALUES ('1RN13CS091','10CS84','CSE8C', 20, 16, 19, 55); 
INSERT INTO IAMARKS  VALUES ('1RN13CS091','10CS85','CSE8C', 15, 15, 12, 42);
INSERT INTO IAMARKS  VALUES ('1RN13CS020','10CS81','CSE8A', 16, 14, 12, 42);
INSERT INTO IAMARKS  VALUES ('1RN13CS020','10CS82','CSE8A', 17, 15, 12, 44);
INSERT INTO IAMARKS  VALUES ('1RN13CS020','10CS83','CSE8A', 19, 13, 16, 48);
INSERT INTO IAMARKS  VALUES ('1RN13CS020','10CS84','CSE8A', 17, 14, 14, 45);
INSERT INTO IAMARKS  VALUES ('1RN13CS020','10CS85','CSE8A', 15, 12, 19, 46);
INSERT INTO IAMARKS  VALUES ('1RN13CS066','10CS81','CSE8B', 15, 12, 19, 46);
INSERT INTO IAMARKS  VALUES ('1RN13CS066','10CS82','CSE8B', 17, 12, 19, 48);
INSERT INTO IAMARKS  VALUES ('1RN13CS066','10CS83','CSE8B', 15, 12, 09, 36);
INSERT INTO IAMARKS  VALUES ('1RN13CS066','10CS84','CSE8B', 18, 15, 19, 52);
INSERT INTO IAMARKS  VALUES ('1RN13CS066','10CS85','CSE8B', 15, 13, 19, 47);
select *
from iamarks;

# Query
1.
select S.usn,S.sname,S.address,S.phone,S.gender
from student S, semsec A,class C
where S.usn=C.usn and A.ssid=C.ssid and A.sem=4 and A.sec='C';
OUTPUT
1RN15CS091	SANTOSH	MANGALURU	8812332201	M
2.
SELECT SS.SEM, SS.SEC, S.GENDER, COUNT(S.GENDER) AS COUNT 
FROM STUDENT S, SEMSEC SS, CLASS C 
WHERE S.USN = C.USN AND SS.SSID = C.SSID 
GROUP BY SS.SEM, SS.SEC, S.GENDER ORDER BY SEM;
OUTPUT
3	A	M	1
3	B	F	1
3	C	M	1
4	A	F	1
4	A	M	1
4	B	M	1
4	C	M	1
7	A	F	1
7	A	M	2
8	A	F	1
8	A	M	1
8	B	F	1
8	C	F	1

3.
create view MARKS1(marks, subject) as
select M.test1, S.subcode
from iamarks M, ssubject S
where M.subcode=S.subcode and M.usn='1RN13CS091'; 
select *
from MARKS1;
OUTPUT
15	10CS81
12	10CS82
19	10CS83
20	10CS84
15	10CS85

4.
SELECT S.USN,S.SNAME,S.ADDRESS,S.PHONE,S.GENDER, 
(CASE WHEN IA.FINALA BETWEEN 51 AND 60 THEN 'OUTSTANDING' WHEN IA.FINALA BETWEEN 36 AND 48 THEN 'AVERAGE' ELSE 'WEAK' END) AS CAT 
  FROM STUDENT S, SEMSEC SS, IAMARKS IA, SSUBJECT SUB WHERE S.USN = IA.USN AND SS.SSID = IA.SSID AND SUB.SUBCODE = IA.SUBCODE AND SUB.SEM = 8 
OUTPUT
1RN13CS020	AKSHAY	BELAGAVI	8877881122	M	AVERAGE
1RN13CS066	SUPRIYA	MANGALURU	8877881122	F	AVERAGE
1RN13CS091	TEESHA	BENGALURU	7712312312	F	WEAK
1RN13CS020	AKSHAY	BELAGAVI	8877881122	M	AVERAGE
1RN13CS066	SUPRIYA	MANGALURU	8877881122	F	AVERAGE
1RN13CS091	TEESHA	BENGALURU	7712312312	F	AVERAGE
1RN13CS020	AKSHAY	BELAGAVI	8877881122	M	AVERAGE
1RN13CS066	SUPRIYA	MANGALURU	8877881122	F	AVERAGE
1RN13CS091	TEESHA	BENGALURU	7712312312	F	OUTSTANDING
1RN13CS020	AKSHAY	BELAGAVI	8877881122	M	AVERAGE
1RN13CS066	SUPRIYA	MANGALURU	8877881122	F	OUTSTANDING
1RN13CS091	TEESHA	BENGALURU	7712312312	F	OUTSTANDING
1RN13CS020	AKSHAY	BELAGAVI	8877881122	M	AVERAGE
1RN13CS066	SUPRIYA	MANGALURU	8877881122	F	AVERAGE
1RN13CS091	TEESHA	BENGALURU	7712312312	F	AVERAGE
